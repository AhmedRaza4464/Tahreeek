<div class="container">
  <nz-select [(ngModel)]="selectedOption" (ngModelChange)="onOptionChange($event)" nzPlaceHolder="Select PS" style="width: 200px; margin-top: 10px;">
    <nz-option *ngFor="let option of options" [nzValue]="option.value" [nzLabel]="option.ps"></nz-option>
  </nz-select>
  
  <!-- <nz-select *ngIf="books.length > 0" [(ngModel)]="selectedBook" (ngModelChange)="onBookChange($event)" nzPlaceHolder="Select Book" style="width: 200px; margin-top: 10px;">
    <nz-option *ngFor="let book of filteredBooks" [nzValue]="book.number" [nzLabel]="book.label"></nz-option>
  </nz-select> -->
  
  <nz-empty *ngIf="books.length === 0 && selectedOption" nzDescription="No books available for this PS"></nz-empty>
  
  <!-- Search bar -->
  <!-- <input *ngIf="books.length > 0 && !selectedBook" [(ngModel)]="searchQuery" (ngModelChange)="filterBooks()" placeholder="Search by Book Number" class="form-control mt-3" style="width: 200px;" /> -->

  <!-- This table will be hidden when a book is selected -->
  <table *ngIf="filteredBooks.length > 0" class="table mt-3">
    <thead>
      <tr>
        <th>Book Number</th>
        <th>Details</th>
        <th>PDF</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let book of filteredBooks" (click)="showBookData(book)">
        <td>{{ book.number }}</td>
        <td>{{ book.label }}</td>
        <td>
          <a href="javascript:void(0);" (click)="showBookData(book); $event.stopPropagation();">View PDF</a>
        </td>
      </tr>
    </tbody>
  </table>
  
  <!-- Display selected book details -->
  <div *ngIf="selectedBook">
    <h3>Book Details</h3>
    <p><strong>Book Number:</strong> {{ selectedBook.number }}</p>
    <p><strong>Details:</strong> {{ selectedBook.label }}</p>
    <p><strong>PDF:</strong> <a [href]="selectedBook.url" target="_blank">Open PDF</a></p>
  </div>
  
  
  <nz-empty *ngIf="filteredBooks.length === 0 && selectedBook" nzDescription="No data available for this book"></nz-empty>
  
  <!-- This table will show only when a book is selected -->
  <input type="text" [(ngModel)]="searchTerm" placeholder="Search..." class="form-control mt-3" style="width: 300px;">


  
  <!-- Display filtered table data -->
  <table *ngIf="filteredTableData().length > 0" class="table mt-3">
    <thead>
      <tr>
        <th>PS</th>
        <th>Book Number</th>
        <th>Name</th>
        <th>Phone Number</th>
        <th>Identity Card Number</th>
        <th>Address</th>
        <th>House Number</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of filteredTableData()">
        <td>{{ data.ps }}</td>
        <td>{{ data.booknumber }}</td>
        <td>{{ data.name }}</td>
        <td>{{ data.phonenumber }}</td>
        <td>{{ data.identitycard }}</td>
        <td>{{ data.address }}</td>
        <td>{{ data.house }}</td>
      </tr>
    </tbody>
  </table>
</div>
